# 타임아웃 설정 가이드

## 문제: "timeout of 30000ms exceeded" 오류

LM Studio와 같은 로컬 모델은 응답 생성에 시간이 오래 걸릴 수 있어 타임아웃 오류가 발생할 수 있습니다.

## 해결 방법

### 1. 타임아웃 설정

프로젝트 루트의 `.env` 파일에 다음 설정 추가:

```env
# LLM 호출 타임아웃 (초)
LLM_TIMEOUT=300  # 5분 (기본값)

# API 엔드포인트 타임아웃 (초)
API_TIMEOUT=600  # 10분 (기본값)
```

### 2. 프론트엔드 타임아웃 설정

프론트엔드 폴더의 `.env` 파일에 다음 설정 추가:

```env
# API 요청 타임아웃 (밀리초)
VITE_API_TIMEOUT=300000  # 5분 (300초 = 300000ms)
```

### 3. 서버 실행 시 타임아웃 설정

uvicorn 실행 시 타임아웃 설정:

```powershell
python -m uvicorn app.main:app --reload --timeout-keep-alive 600
```

## 현재 설정값

### 기본값
- **프론트엔드**: 5분 (300,000ms)
- **백엔드 API**: 10분 (600초)
- **LLM 호출**: 5분 (300초)

### LM Studio 사용 시 권장값
- **프론트엔드**: 5분 이상
- **백엔드 API**: 10분 이상
- **LLM 호출**: 5분 이상

## 타임아웃 조정

### 더 긴 타임아웃이 필요한 경우

`.env` 파일에서 값을 증가:

```env
LLM_TIMEOUT=600  # 10분
API_TIMEOUT=900  # 15분
```

프론트엔드 `.env`:
```env
VITE_API_TIMEOUT=600000  # 10분
```

### 더 짧은 타임아웃이 필요한 경우

```env
LLM_TIMEOUT=120  # 2분
API_TIMEOUT=180  # 3분
```

프론트엔드 `.env`:
```env
VITE_API_TIMEOUT=180000  # 3분
```

## 문제 해결

### 여전히 타임아웃이 발생하는 경우

1. **LM Studio 모델 성능 확인**
   - 더 작은 모델 사용 고려
   - GPU 가속 활성화

2. **타임아웃 값 증가**
   - `.env` 파일에서 타임아웃 값 증가
   - 서버 재시작

3. **프롬프트 최적화**
   - 프롬프트 길이 단축
   - 불필요한 컨텍스트 제거

## 참고사항

- 로컬 모델은 GPU가 없으면 매우 느릴 수 있습니다
- 타임아웃을 너무 길게 설정하면 사용자 경험이 나빠질 수 있습니다
- 적절한 균형을 찾는 것이 중요합니다

